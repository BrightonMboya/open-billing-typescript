/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
import { OpenBillingCore } from "../core.js";
import { SDKOptions } from "../lib/config.js";
import type { ConsoleLogger } from "./console-logger.js";
import {
  createRegisterResource,
  createRegisterResourceTemplate,
} from "./resources.js";
import { MCPScope, mcpScopes } from "./scopes.js";
import { createRegisterTool } from "./tools.js";
import { tool$customersAddressesCreate } from "./tools/customersAddressesCreate.js";
import { tool$customersAddressesGet } from "./tools/customersAddressesGet.js";
import { tool$customersAddressesList } from "./tools/customersAddressesList.js";
import { tool$customersAddressesUpdate } from "./tools/customersAddressesUpdate.js";
import { tool$customersCreate } from "./tools/customersCreate.js";
import { tool$customersGet } from "./tools/customersGet.js";
import { tool$customersList } from "./tools/customersList.js";
import { tool$customersUpdate } from "./tools/customersUpdate.js";
import { tool$developerToolsCreate } from "./tools/developerToolsCreate.js";
import { tool$developerToolsCreatePaymentProviderKey } from "./tools/developerToolsCreatePaymentProviderKey.js";
import { tool$discountsCreate } from "./tools/discountsCreate.js";
import { tool$discountsGet } from "./tools/discountsGet.js";
import { tool$discountsList } from "./tools/discountsList.js";
import { tool$discountsUpdate } from "./tools/discountsUpdate.js";
import { tool$pricesCreate } from "./tools/pricesCreate.js";
import { tool$pricesGet } from "./tools/pricesGet.js";
import { tool$pricesList } from "./tools/pricesList.js";
import { tool$pricesUpdate } from "./tools/pricesUpdate.js";
import { tool$productsCreateWithPrices } from "./tools/productsCreateWithPrices.js";
import { tool$productsGet } from "./tools/productsGet.js";
import { tool$productsList } from "./tools/productsList.js";
import { tool$productsUpdate } from "./tools/productsUpdate.js";
import { tool$subscriptionsActivate } from "./tools/subscriptionsActivate.js";
import { tool$subscriptionsCancel } from "./tools/subscriptionsCancel.js";
import { tool$subscriptionsCreate } from "./tools/subscriptionsCreate.js";
import { tool$subscriptionsList } from "./tools/subscriptionsList.js";
import { tool$subscriptionsPause } from "./tools/subscriptionsPause.js";
import { tool$subscriptionsResume } from "./tools/subscriptionsResume.js";
import { tool$subscriptionsUpdate } from "./tools/subscriptionsUpdate.js";
import { tool$transactionsCreate } from "./tools/transactionsCreate.js";
import { tool$transactionsGet } from "./tools/transactionsGet.js";
import { tool$transactionsList } from "./tools/transactionsList.js";
import { tool$transactionsUpdate } from "./tools/transactionsUpdate.js";

export function createMCPServer(deps: {
  logger: ConsoleLogger;
  allowedTools?: string[] | undefined;
  scopes?: MCPScope[] | undefined;
  serverURL?: string | undefined;
  security?: SDKOptions["security"] | undefined;
  serverIdx?: SDKOptions["serverIdx"] | undefined;
}) {
  const server = new McpServer({
    name: "OpenBilling",
    version: "0.3.2",
  });

  const client = new OpenBillingCore({
    security: deps.security,
    serverURL: deps.serverURL,
    serverIdx: deps.serverIdx,
  });

  const scopes = new Set(deps.scopes ?? mcpScopes);

  const allowedTools = deps.allowedTools && new Set(deps.allowedTools);
  const tool = createRegisterTool(
    deps.logger,
    server,
    client,
    scopes,
    allowedTools,
  );
  const resource = createRegisterResource(deps.logger, server, client, scopes);
  const resourceTemplate = createRegisterResourceTemplate(
    deps.logger,
    server,
    client,
    scopes,
  );
  const register = { tool, resource, resourceTemplate };
  void register; // suppress unused warnings

  tool(tool$productsList);
  tool(tool$productsCreateWithPrices);
  tool(tool$productsGet);
  tool(tool$productsUpdate);
  tool(tool$pricesList);
  tool(tool$pricesCreate);
  tool(tool$pricesGet);
  tool(tool$pricesUpdate);
  tool(tool$customersList);
  tool(tool$customersCreate);
  tool(tool$customersGet);
  tool(tool$customersUpdate);
  tool(tool$discountsList);
  tool(tool$discountsCreate);
  tool(tool$discountsGet);
  tool(tool$discountsUpdate);
  tool(tool$subscriptionsCreate);
  tool(tool$subscriptionsList);
  tool(tool$subscriptionsCancel);
  tool(tool$subscriptionsPause);
  tool(tool$subscriptionsResume);
  tool(tool$subscriptionsActivate);
  tool(tool$subscriptionsUpdate);
  tool(tool$transactionsCreate);
  tool(tool$transactionsList);
  tool(tool$transactionsGet);
  tool(tool$transactionsUpdate);
  tool(tool$developerToolsCreate);
  tool(tool$developerToolsCreatePaymentProviderKey);
  tool(tool$customersAddressesList);
  tool(tool$customersAddressesCreate);
  tool(tool$customersAddressesGet);
  tool(tool$customersAddressesUpdate);

  return server;
}
